filename←⊃1↓2⎕NQ#'GetCommandLineArgs'
header data←{(⊃⍵)(1↓⍵)}' '(≠⊆⊢)¨⊃⎕NGET filename 1
main←{
     ⍺←''
     h d←(2↑⍺)(2↓⍺)
     d←(⊂∘⍋⌷⊢)d
     ⎕←h
     _←{⎕←⍵}¨d
     input←' '(≠⊆⊢)∊⍞
     cmd←⊃input
     args←1↓input
     ∨/(⊂cmd)∘.≡((∊'q')'quit' 'exit'):{∊((1↑⍵),' ',(1↓⍵))}¨((⊂h),d)
     ∨/(⊂cmd)∘.≡((∊'a')'add'):(h,({⎕←∊(⊂'Added'),' ',¨⍵ ⋄ d,⊂⍵}args))∇ ⍵
     ∨/(⊂cmd)∘.≡((∊'u')'update'):(h,({⎕←'Updated' ⋄ (⊂1↓⍵)@(⍎⊃⍵)⊢d}args))∇ ⍵
     ∨/(⊂cmd)∘.≡((∊'d')'delete'):(h,({⎕←'Deleted' ⋄ (0@(⍎⊃⍵)⊢(≢d)⍴1)/d}args))∇ ⍵
     (h,d)∇ ⍵
}
out ← (header,data) main 1
(⊂out) ⎕NPUT filename 1